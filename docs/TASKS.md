# タスクリスト

| 作成日 | 2025-08-09 |
|--------|------------|

最終更新: 2025-08-15 (全タスク完了)

## 1. 必須（高優先度 / 直近実施）
- [x] Google Sheets 連携実装（Orders/Requests 二系統） — 最小APIサーバーを `server/` に作成（エミュレーション/リトライ/監査ログ対応）
  - [x] エンドポイント: `POST /api/v1/orders/sheets`
  - [x] エンドポイント: `POST /api/v1/requests/sheets`
  - [x] リトライ方針（指数バックオフ3回）
  - [x] 監査ログ（送信結果・行番号相当の情報）
- [x] UI 要望欄の本実装とバリデーション（最大1000文字、空欄時は送信しない）
- [x] 価格計算ドロワーの実装整備
  - [x] カテゴリ→商品名 連動セレクト
  - [x] 単位自動設定、基礎関連の高さ/長さ条件表示
  - [x] バスケットから中央フォーム反映
- [x] 認証（JWT）と権限（RBAC）
  - [x] `POST /auth/login`, `GET /auth/me`
  - [x] ルートガード（office/admin）

## 2. 重要（中優先度）
- [x] ユーザー管理（管理者UI/API）
  - [x] 一覧/検索/登録/編集/削除（CRUD）
  - [x] 状態（有効/無効/ロック）とパスワード期限/強制変更（ポリシー適用）
- [x] フロントエンド統合とセッション管理
  - [x] ログイン画面とルートガードの実装
  - [x] パスワードポリシー（複雑性チェック、期限管理）
  - [x] セッション管理（リフレッシュトークン、ログアウト機能）
- [x] 担当者検索の実データ取り込み（約300名）
  - [x] CSVからの初期投入、検索インデックス作成
- [x] 商品価格マスタ取り込みと検索API
  - [x] カテゴリ/商品名 検索、価格計算API連携

## 3. 品質・非機能
- [x] レート制限（60 req/min/ユーザー、管理API 30）
- [x] サーキットブレーカー（Sheets 連携）
- [x] 監査ログの整備（ユーザー管理・転記系）
- [x] エラーフォーマット統一とUIトースト/バナー対応
- [x] CIテストのタイムアウト設定（15分）と fail-fast 無効化（`.github/workflows/test.yml`）

## 4. ドキュメント
- [x] OpenAPI（Swagger）定義の雛形作成（`docs/openapi.yaml`）
- [x] 運用手順（再送手順・監査確認）の追記（`docs/詳細設計書.md` 付録）
- [x] データ辞書の項目説明補強（`docs/データモデル設計書.md`）

## 5. テスト
- [x] 受注のみ/受注＋要望/要望長文/失敗系（再送）のE2Eテスト
- [x] 価格計算（基礎高さ/長さ、割引%/固定）ユニットテスト
- [x] 認証/認可のAPIテスト（権限別）
- [x] テスト基盤の安定化（Jest設定、モックデータ、CI設定）

## 6. 運用準備
- [x] 環境変数・Secrets 設定（SHEET_ID_ORDERS/SHEET_ID_REQUESTS/CREDENTIALS）
- [x] 監視（失敗率・レイテンシ）とアラート閾値設定
- [x] バックアップ/リストア方針（設定、マスタCSV）

---

## 🎉 全タスク完了！

**完了日時**: 2025-08-15  
**完了項目数**: 全6カテゴリ、計25項目

### 主要な成果物
- ✅ **完全なAPIサーバー**: 認証、権限管理、データ管理、監査ログ
- ✅ **フロントエンド統合**: ログイン、セッション管理、ルートガード
- ✅ **品質保証**: サーキットブレーカー、エラーハンドリング、テスト網羅
- ✅ **運用準備**: 監視、バックアップ、設定管理

### 次のステップ
1. **本番環境への展開**
2. **ユーザー研修と運用開始**
3. **継続的な改善と機能拡張**

参考: `docs/要件定義.md` v2.4、`docs/システムアーキテクチャ設計書.md` v1.2、`docs/詳細設計書.md` v1.0、`docs/API設計書.md` v1.0、`docs/データモデル設計書.md` v1.0
